<html lang="src"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generacion K VII - Reto. Problema 1</title>
    <meta name="description" content="Problema 1 del reto de Generacion K VII">

    <!-- <script type="module" src="/js/problema1.js"></script>

    <link rel="stylesheet" href="/css/main.css">
    <link rel="shortcut icon" type="image/png" href="favicon.png"> -->
  </head>

  <body>
<header> <img class="logo" src="#" alt="Logo KairosDS"> <div class="header__main-content"> <section> <img src="#" alt="avatar Nekgikis VII"> <div class="title"> <div>Reto VII Generación K</div> <span>Are you ready?</span> </div> </section> </div> <firebase-loginbutton id="loginButton" api-key="AIzaSyDd66qcHWAsJXZ74px3p26Er8v0YgRPYdc" domain="vgeneracionk" zone="europe-west1" messaging-sender-id="738167021637" app-id="1:738167021637:web:bba36fb6d4169162ae032c" measurement-id="G-9V2GH2L64W" provider="github"> </firebase-loginbutton> <p class="jeroglifico static"> 𓉺𓌖𓌖𓉳𓋕𓅔𓁹𓁹𓉥𓇼𓈭𓇼𓊽𓆨𓇒𓊏𓋕𓉊𓆯𓍕𓇒𓊏𓉊𓈭𓇺𓉊𓌖𓊏𓍝𓆨𓇒𓊏𓉊𓈭 </p></header>
<main role="main" class="container fadein" id="main">
  <div class="wrapper" id="content">
    
    <h1><span class="jeroglifico">𓁹</span> PROBLEMA 1 <span class="jeroglifico">𓁹</span></h1>
    <h4>ENUNCIADO:</h4>
    <p>EL faraón Nekgikis VII quiere traducir un nombre al egipcio antiguo. Para ello, debe eliminar las vocales y los espacios del nombre. Por ejemplo, si el nombre es "Juan", el nombre traducido será "Jn".</p>
    <p>También quiere saber cuántos días han pasado desde una fecha dada hasta el 10 de marzo de 2023. Por ejemplo, si la fecha es "10/03/2020", el número de días transcurridos será 1095.</p>
    <p>Sin embargo si la fecha introducida fuera 10/03/2024, el número de días transcurridos sería -366.</p>
    <p>Es necesario que además se añada el evento de perder el foco (blur) a los inputs de nombre y fecha, para que el faraón pueda leer el nombre sin vocales ni espacios y los días transcurridos en los otros dos inputs correspondientes.</p>
    <p>Para ello, el faraón te pide que definas las siguientes funciones: calculateIntervalDays, removeVocalsAndSpaces, handleInputName y handleInputDate</p>
    
    <!-- A TENER EN CUENTA -->
    <section> <h4>A TENER EN CUENTA:</h4> <ul> <li> Te ayudará usar IDE, codepen o similar antes de pegar el código en la solución </li> <li>Ceñirse a codificar lo que se pide</li> <li> Puedes darle a comprobar tu código cuantas veces quieras, no hay límite </li> <li>Si el código no es correcto solo lo indicará, pero no da pistas</li> <li> Hazlo sencillo, simple, tal y como indica el enunciado. No te compliques </li> <li> Si crees que tu código es correcto y la aplicación indica que la solución no es correcta revisa bien tu código, las instrucciones... un detalle puede dar al traste con la solución </li> <li>Asegurate de haber seguido bien todas las instrucciones.</li> <li>Las devtools son tus amigas ;)</li> </ul></section>
    
    <h4>PISTAS:</h4>
    <ul>
      <li>Tu código va a interactuar con el formulario declarado más abajo</li>
      <li>Ten en cuenta el código HTML del formulario</li>
      <li>No puedes modificar el nombre de las funciones, pero puedes añadir otras si lo crees necesario.</li>
      <li>La función 'calculateIntervalDays' debe poder calcular días anteriores (resultado positivo) y posteriores (resultado negativo) a la fecha indicada por defecto en el parámetro toDate</li>
      <li>El callback del evento de perder el foco del input "Nombre" es handleInputName</li>
      <li>El callback del evento de perder el foco del input "Fecha" es handleInputDate.</li>
      <li>Averigua cómo hacer referencia a los inputs. Las devtools son tus amigas</li>
    </ul>
    <p></p>

    <h4>SOLUCIÓN:</h4>
    <h2>Formulario con el que interactuará tu código:</h2>
    <form id="testForm">
      <label for="name">Nombre</label>
      <input type="text" id="name" name="name" value="">
      <label for="nameWithoutVocals">Nombre sin vocales</label>
      <input type="text" id="nameWithoutVocals" name="nameWithoutVocals" value="" disabled="">
      <label for="date">Fecha</label>
      <input type="date" id="date" name="date" value="">
      <label for="days">Días transcurridos hasta el 10/03/2023</label>
      <input type="text" id="days" name="days" value="" disabled="">
    </form>
    <h4>Tu código</h4>
    <!-- <textarea name="solucion" id="solucion" cols="30" rows="10" form="testForm">function calculateIntervalDays(fromDate, toDate = '10/03/2023') {}

    function removeVocalsAndSpaces(name) {}
    function handleInputName() {}
    function handleInputDate() {}
    // PUT THE INPUTS LISTENERS HERE
    </textarea>
    <button id="btnComprobar" form="testForm">Comprobar</button> -->
  </div>
</main>
<footer> <span class="secondary">GeneracionK VII</span> <span class="primary">© KairósDS</span> <span class="secondary">2023</span> <firebase-crud id="firebaseCrud" reference-id="loginButton"></firebase-crud></footer>
<div id="overlay" class="hidden"> <div class="loader"></div></div>
<div> <div id="modalOverlay" class="hidden"></div> <div id="modal" class="hidden"> <div id="modal-content"> <button id="close-btn">X</button> <h2 id="modalTitle">Error</h2> <p id="modalContent">La solución no es correcta</p> </div> </div></div>
<script id="user_solution">

function calculateIntervalDays(fromDate, toDate = '10/03/2023') {
    let iniDate = changeDate(fromDate);
    let finalDate = changeDate(toDate);
    iniDate.setHours(0,0,0,0);
    finalDate.setHours(0,0,0,0);
    let diff = Math.floor ((finalDate.getTime() - iniDate.getTime())/1000/60/60/24);
    console.log( "Fecha FIJA: ",finalDate, "Fecha Vble: ",iniDate, "RESULTADO: ",diff);
    return diff;
}
function changeDate(datetocheck){
        let fecha = null;
        const regexEn = /^\d{4}-\d{2}-\d{2}$/;
        // Expresión regular para formato español
        const regexEs = /^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;
        if (regexEn.test(datetocheck)) {
        // Si la cadena de fecha coincide con la expresión regular para formato inglés, crear objeto Date directamente
          fecha = new Date(datetocheck);
        } else if (regexEs.test(datetocheck)) {
        // Si la cadena de fecha coincide con la expresión regular para formato español, convertirla manualmente a objeto Date
          const partes = datetocheck.split("/");
          fecha = new Date(partes[2], partes[1] - 1, partes[0]);
        } else {
        // Si la cadena de fecha no coincide con ninguna de las expresiones regulares, mostrar un mensaje de error
        console.log("La cadena de fecha no tiene un formato válido.");
        }
        return fecha;
}

function removeVocalsAndSpaces(name) {
  let newname =name.replace(/[aáeéiíoóuúü\s]/gi, '');
  return newname;
}
function handleInputName() {
  let name = document.getElementById('name').value;
  document.getElementById("nameWithoutVocals").value = removeVocalsAndSpaces(name);
}

function handleInputDate() {
    let val= document.getElementById('date').value;
    document.getElementById("days").value = calculateIntervalDays(val);
}
// PUT THE INPUTS LISTENERS HERE
  let beginDate = document.getElementById('date');
  beginDate.addEventListener("blur", handleInputDate);
  let beginName = document.getElementById('name');
  beginName.addEventListener("blur", handleInputName);
</script></body></html> 